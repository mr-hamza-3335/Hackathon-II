{{- if .Values.dapr.enabled }}
# T-008: Dapr Secrets Store component backed by Kubernetes Secrets
# Plan ref: Plan §4.1 (secretstore-k8s), Plan §4.4 (Secret Store details)
# Spec ref: FR-042 (K8s secrets in production), Infrastructure Abstraction (Secrets)
# Constitution IX: All secrets through Dapr secrets API, never hard-coded
#
# Secrets managed:
#   DATABASE_URL       — PostgreSQL connection string
#   JWT_SECRET         — JWT signing key
#   COHERE_API_KEY     — AI model API key
#   KAFKA_SASL_PASSWORD — Kafka auth (production only)
#
# Backing store: Kubernetes Secrets (both local and production)
# The Dapr 'kubernetes' secret store reads from K8s Secret objects natively.
apiVersion: dapr.io/v1alpha1
kind: Component
metadata:
  name: secretstore-k8s
  namespace: {{ .Values.global.namespace }}
  labels:
    {{- include "pakaura.labels" . | nindent 4 }}
spec:
  type: {{ .Values.dapr.secretstore.type }}
  version: v1
  metadata: []
{{- end }}
